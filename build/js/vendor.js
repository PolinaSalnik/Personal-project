(function(){function e(t,e){return function(){return t.apply(e,arguments)}}var i,t,n,a,o,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};function s(){}function l(){this.keys=[],this.values=[]}function u(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}function h(t){null==t&&(t={}),this.scrollCallback=e(this.scrollCallback,this),this.scrollHandler=e(this.scrollHandler,this),this.start=e(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),this.animationNameCache=new n,this.wowEvent=this.util().createEvent(this.config.boxClass)}s.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},s.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},s.prototype.createEvent=function(t,e,n,i){var o;return null==e&&(e=!1),null==n&&(n=!1),null==i&&(i=null),null!=document.createEvent?(o=document.createEvent("CustomEvent")).initCustomEvent(t,e,n,i):null!=document.createEventObject?(o=document.createEventObject()).eventType=t:o.eventName=t,o},s.prototype.emitEvent=function(t,e){return null!=t.dispatchEvent?t.dispatchEvent(e):e in(null!=t)?t[e]():"on"+e in(null!=t)?t["on"+e]():void 0},s.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},s.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},s.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t=s,n=this.WeakMap||this.MozWeakMap||(l.prototype.get=function(t){var e,n,i,o;for(e=n=0,i=(o=this.keys).length;n<i;e=++n)if(o[e]===t)return this.values[e]},l.prototype.set=function(t,e){var n,i,o,s;for(n=i=0,o=(s=this.keys).length;i<o;n=++i)if(s[n]===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},l),i=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(u.notSupported=!0,u.prototype.observe=function(){},u),a=this.getComputedStyle||function(n,t){return this.getPropertyValue=function(t){var e;return"float"===t&&(t="styleFloat"),o.test(t)&&t.replace(o,function(t,e){return e.toUpperCase()}),(null!=(e=n.currentStyle)?e[t]:void 0)||null},this},o=/(\-([a-z]){1})/g,this.WOW=(h.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null},h.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},h.prototype.start=function(){var o,t,e,n,r;if(this.stopped=!1,this.boxes=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.element.querySelectorAll("."+this.config.boxClass)).length;t<e;t++)o=n[t],i.push(o);return i}.call(this),this.all=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.boxes).length;t<e;t++)o=n[t],i.push(o);return i}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(t=0,e=(n=this.boxes).length;t<e;t++)o=n[t],this.applyStyle(o,!0);if(this.disabled()||(this.util().addEvent(window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new i((r=this,function(t){var e,n,o,s,i;for(i=[],e=0,n=t.length;e<n;e++)s=t[e],i.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=s.addedNodes||[]).length;t<e;t++)o=n[t],i.push(this.doSync(o));return i}.call(r));return i})).observe(document.body,{childList:!0,subtree:!0})},h.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},h.prototype.sync=function(t){if(i.notSupported)return this.doSync(this.element)},h.prototype.doSync=function(t){var e,n,i,o,s;if(null==t&&(t=this.element),1===t.nodeType){for(s=[],n=0,i=(o=(t=t.parentNode||t).querySelectorAll("."+this.config.boxClass)).length;n<i;n++)e=o[n],r.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),s.push(this.scrolled=!0)):s.push(void 0);return s}},h.prototype.show=function(t){return this.applyStyle(t),t.className=t.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(t),this.util().emitEvent(t,this.wowEvent),this.util().addEvent(t,"animationend",this.resetAnimation),this.util().addEvent(t,"oanimationend",this.resetAnimation),this.util().addEvent(t,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(t,"MSAnimationEnd",this.resetAnimation),t},h.prototype.applyStyle=function(t,e){var n,i,o,s;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),o=t.getAttribute("data-wow-iteration"),this.animate((s=this,function(){return s.customStyle(t,e,i,n,o)}))},h.prototype.animate="requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()},h.prototype.resetStyle=function(){var t,e,n,i,o;for(o=[],e=0,n=(i=this.boxes).length;e<n;e++)t=i[e],o.push(t.style.visibility="visible");return o},h.prototype.resetAnimation=function(t){var e;if(0<=t.type.toLowerCase().indexOf("animationend"))return(e=t.target||t.srcElement).className=e.className.replace(config.animateClass,"").trim()},h.prototype.customStyle=function(t,e,n,i,o){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),o&&this.vendorSet(t.style,{animationIterationCount:o}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},h.prototype.vendors=["moz","webkit"],h.prototype.vendorSet=function(o,t){var s,e,r,l;for(s in e=[],t)r=t[s],o[""+s]=r,e.push(function(){var t,e,n,i;for(i=[],t=0,e=(n=this.vendors).length;t<e;t++)l=n[t],i.push(o[""+l+s.charAt(0).toUpperCase()+s.substr(1)]=r);return i}.call(this));return e},h.prototype.vendorCSS=function(t,e){var n,i,o,s,r,l;for(s=(r=a(t)).getPropertyCSSValue(e),n=0,i=(o=this.vendors).length;n<i;n++)l=o[n],s=s||r.getPropertyCSSValue("-"+l+"-"+e);return s},h.prototype.animationName=function(e){var n;try{n=this.vendorCSS(e,"animation-name").cssText}catch(t){n=a(e).getPropertyValue("animation-name")}return"none"===n?"":n},h.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},h.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},h.prototype.scrollHandler=function(){return this.scrolled=!0},h.prototype.scrollCallback=function(){var o;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.boxes).length;t<e;t++)(o=n[t])&&(this.isVisible(o)?this.show(o):i.push(o));return i}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},h.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},h.prototype.isVisible=function(t){var e,n,i,o,s;return n=t.getAttribute("data-wow-offset")||this.config.offset,o=(s=window.pageYOffset)+Math.min(this.element.clientHeight,this.util().innerHeight())-n,e=(i=this.offsetTop(t))+t.clientHeight,i<=o&&s<=e},h.prototype.util=function(){return null!=this._util?this._util:this._util=new t},h.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},h)}).call(this);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZlbmRvci5qcyJdLCJuYW1lcyI6WyJiaW5kIiwiZm4iLCJtZSIsImFwcGx5IiwiYXJndW1lbnRzIiwiTXV0YXRpb25PYnNlcnZlciIsIlV0aWwiLCJXZWFrTWFwIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldENvbXB1dGVkU3R5bGVSWCIsImluZGV4T2YiLCJpdGVtIiwiaSIsImwiLCJ0aGlzIiwibGVuZ3RoIiwia2V5cyIsInZhbHVlcyIsImNvbnNvbGUiLCJ3YXJuIiwiV09XIiwib3B0aW9ucyIsInNjcm9sbENhbGxiYWNrIiwic2Nyb2xsSGFuZGxlciIsInN0YXJ0Iiwic2Nyb2xsZWQiLCJjb25maWciLCJ1dGlsIiwiZXh0ZW5kIiwiZGVmYXVsdHMiLCJhbmltYXRpb25OYW1lQ2FjaGUiLCJ3b3dFdmVudCIsImNyZWF0ZUV2ZW50IiwiYm94Q2xhc3MiLCJwcm90b3R5cGUiLCJjdXN0b20iLCJrZXkiLCJ2YWx1ZSIsImlzTW9iaWxlIiwiYWdlbnQiLCJ0ZXN0IiwiZXZlbnQiLCJidWJibGUiLCJjYW5jZWwiLCJkZXRhaWwiLCJjdXN0b21FdmVudCIsImRvY3VtZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJldmVudFR5cGUiLCJldmVudE5hbWUiLCJlbWl0RXZlbnQiLCJlbGVtIiwiZGlzcGF0Y2hFdmVudCIsImFkZEV2ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJpbm5lckhlaWdodCIsIndpbmRvdyIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsIk1veldlYWtNYXAiLCJnZXQiLCJqIiwibGVuIiwicmVmIiwic2V0IiwicHVzaCIsIldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIiLCJNb3pNdXRhdGlvbk9ic2VydmVyIiwibm90U3VwcG9ydGVkIiwib2JzZXJ2ZSIsImVsIiwicHNldWRvIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInByb3AiLCJyZXBsYWNlIiwiXyIsIl9jaGFyIiwidG9VcHBlckNhc2UiLCJjdXJyZW50U3R5bGUiLCJhbmltYXRlQ2xhc3MiLCJvZmZzZXQiLCJtb2JpbGUiLCJsaXZlIiwiY2FsbGJhY2siLCJpbml0IiwiZWxlbWVudCIsInJlYWR5U3RhdGUiLCJmaW5pc2hlZCIsImJveCIsIl90aGlzIiwic3RvcHBlZCIsImJveGVzIiwicmVzdWx0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjYWxsIiwiYWxsIiwiZGlzYWJsZWQiLCJyZXNldFN0eWxlIiwiYXBwbHlTdHlsZSIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJyZWNvcmRzIiwiayIsImxlbjEiLCJub2RlIiwicmVjb3JkIiwibGVuMiIsInJlZjEiLCJyZXN1bHRzMSIsImFkZGVkTm9kZXMiLCJkb1N5bmMiLCJib2R5IiwiY2hpbGRMaXN0Iiwic3VidHJlZSIsInN0b3AiLCJjbGVhckludGVydmFsIiwic3luYyIsIm5vZGVUeXBlIiwicGFyZW50Tm9kZSIsInNob3ciLCJjbGFzc05hbWUiLCJyZXNldEFuaW1hdGlvbiIsImhpZGRlbiIsImRlbGF5IiwiZHVyYXRpb24iLCJpdGVyYXRpb24iLCJnZXRBdHRyaWJ1dGUiLCJhbmltYXRlIiwiY3VzdG9tU3R5bGUiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJzdHlsZSIsInZpc2liaWxpdHkiLCJ0YXJnZXQiLCJ0eXBlIiwidG9Mb3dlckNhc2UiLCJzcmNFbGVtZW50IiwidHJpbSIsImNhY2hlQW5pbWF0aW9uTmFtZSIsInZlbmRvclNldCIsImFuaW1hdGlvbkR1cmF0aW9uIiwiYW5pbWF0aW9uRGVsYXkiLCJhbmltYXRpb25JdGVyYXRpb25Db3VudCIsImFuaW1hdGlvbk5hbWUiLCJjYWNoZWRBbmltYXRpb25OYW1lIiwidmVuZG9ycyIsInByb3BlcnRpZXMiLCJuYW1lIiwidmVuZG9yIiwiY2hhckF0Iiwic3Vic3RyIiwidmVuZG9yQ1NTIiwicHJvcGVydHkiLCJyZXN1bHQiLCJnZXRQcm9wZXJ0eUNTU1ZhbHVlIiwiY3NzVGV4dCIsIl9lcnJvciIsImlzVmlzaWJsZSIsIm9mZnNldFRvcCIsInRvcCIsIm9mZnNldFBhcmVudCIsImJvdHRvbSIsInZpZXdCb3R0b20iLCJ2aWV3VG9wIiwicGFnZVlPZmZzZXQiLCJNYXRoIiwibWluIiwiX3V0aWwiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiXSwibWFwcGluZ3MiOiJDQUFBLFdBRVcsU0FBUEEsRUFBZ0JDLEVBQUlDLEdBQUssT0FBTyxXQUFZLE9BQU9ELEVBQUdFLE1BQU1ELEVBQUlFLFlBRGxFLElBQUlDLEVBQWtCQyxFQUFNQyxFQUFTQyxFQUFrQkMsRUFFckRDLEVBQVUsR0FBR0EsU0FBVyxTQUFTQyxHQUFRLElBQUssSUFBSUMsRUFBSSxFQUFHQyxFQUFJQyxLQUFLQyxPQUFRSCxFQUFJQyxFQUFHRCxJQUFPLEdBQUlBLEtBQUtFLE1BQVFBLEtBQUtGLEtBQU9ELEVBQU0sT0FBT0MsRUFBSyxPQUFRLEdBRy9JLFNBQVNOLEtBbUZULFNBQVNDLElBQ1BPLEtBQUtFLEtBQU8sR0FDWkYsS0FBS0csT0FBUyxHQWlDaEIsU0FBU1osSUFDZ0Isb0JBQVphLFNBQXVDLE9BQVpBLFNBQ3BDQSxRQUFRQyxLQUFLLHNEQUVRLG9CQUFaRCxTQUF1QyxPQUFaQSxTQUNwQ0EsUUFBUUMsS0FBSyxzRkF3Q2pCLFNBQVNDLEVBQUlDLEdBQ0ksTUFBWEEsSUFDRkEsRUFBVSxJQUVaUCxLQUFLUSxlQUFpQnRCLEVBQUtjLEtBQUtRLGVBQWdCUixNQUNoREEsS0FBS1MsY0FBZ0J2QixFQUFLYyxLQUFLUyxjQUFlVCxNQUM5Q0EsS0FBS1UsTUFBUXhCLEVBQUtjLEtBQUtVLE1BQU9WLE1BQzlCQSxLQUFLVyxVQUFXLEVBQ2hCWCxLQUFLWSxPQUFTWixLQUFLYSxPQUFPQyxPQUFPUCxFQUFTUCxLQUFLZSxVQUMvQ2YsS0FBS2dCLG1CQUFxQixJQUFJdkIsRUFDOUJPLEtBQUtpQixTQUFXakIsS0FBS2EsT0FBT0ssWUFBWWxCLEtBQUtZLE9BQU9P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QUFLRCxLQUNyQzJCLEVBQU16QixFQUFJRixNQUlOcEQsS0FBS21KLFVBQVVwRSxHQUNqQi9FLEtBQUs4RyxLQUFLL0IsR0FHWkksRUFBUTNCLEtBQUt1QixJQUVmLE9BQU9JLEdBQ05FLEtBQUtyRixPQUNGQSxLQUFLa0YsTUFBTWpGLFNBQVVELEtBQUtZLE9BQU82RCxNQUNyQyxPQUFPekUsS0FBS3lHLFFBS2xCbkcsRUFBSWMsVUFBVWdJLFVBQVksU0FBU3hFLEdBRWpDLElBREEsSUFBSXlFLE9BQ3lCLElBQXRCekUsRUFBUXdFLFdBQ2J4RSxFQUFVQSxFQUFRaUMsV0FHcEIsSUFEQXdDLEVBQU16RSxFQUFRd0UsVUFDUHhFLEVBQVVBLEVBQVEwRSxjQUN2QkQsR0FBT3pFLEVBQVF3RSxVQUVqQixPQUFPQyxHQUdUL0ksRUFBSWMsVUFBVStILFVBQVksU0FBU3BFLEdBQ2pDLElBQUl3RSxFQUFRaEYsRUFBUThFLEVBQUtHLEVBQVlDLEVBTXJDLE9BTEFsRixFQUFTUSxFQUFJc0MsYUFBYSxvQkFBc0JySCxLQUFLWSxPQUFPMkQsT0FFNURpRixHQURBQyxFQUFVMUcsT0FBTzJHLGFBQ01DLEtBQUtDLElBQUk1SixLQUFLNEUsUUFBUTNCLGFBQWNqRCxLQUFLYSxPQUFPaUMsZUFBaUJ5QixFQUV4RmdGLEdBREFGLEVBQU1ySixLQUFLb0osVUFBVXJFLElBQ05BLEVBQUk5QixhQUNab0csR0FBT0csR0FBd0JDLEdBQVZGLEdBRzlCakosRUFBSWMsVUFBVVAsS0FBTyxXQUNuQixPQUFxQixNQUFkYixLQUFLNkosTUFBZ0I3SixLQUFLNkosTUFBUTdKLEtBQUs2SixNQUFRLElBQUlySyxHQUc1RGMsRUFBSWMsVUFBVW1FLFNBQVcsV0FDdkIsT0FBUXZGLEtBQUtZLE9BQU80RCxRQUFVeEUsS0FBS2EsT0FBT1csU0FBU3NJLFVBQVVDLFlBR3hEekosS0FJUitFLEtBQUtyRiIsImZpbGUiOiJ2ZW5kb3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XHJcbiAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIsIFV0aWwsIFdlYWtNYXAsIGdldENvbXB1dGVkU3R5bGUsIGdldENvbXB1dGVkU3R5bGVSWCxcclxuICAgIGJpbmQgPSBmdW5jdGlvbihmbiwgbWUpeyByZXR1cm4gZnVuY3Rpb24oKXsgcmV0dXJuIGZuLmFwcGx5KG1lLCBhcmd1bWVudHMpOyB9OyB9LFxyXG4gICAgaW5kZXhPZiA9IFtdLmluZGV4T2YgfHwgZnVuY3Rpb24oaXRlbSkgeyBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7IGlmIChpIGluIHRoaXMgJiYgdGhpc1tpXSA9PT0gaXRlbSkgcmV0dXJuIGk7IH0gcmV0dXJuIC0xOyB9O1xyXG5cclxuICBVdGlsID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgZnVuY3Rpb24gVXRpbCgpIHt9XHJcblxyXG4gICAgVXRpbC5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24oY3VzdG9tLCBkZWZhdWx0cykge1xyXG4gICAgICB2YXIga2V5LCB2YWx1ZTtcclxuICAgICAgZm9yIChrZXkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICB2YWx1ZSA9IGRlZmF1bHRzW2tleV07XHJcbiAgICAgICAgaWYgKGN1c3RvbVtrZXldID09IG51bGwpIHtcclxuICAgICAgICAgIGN1c3RvbVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBjdXN0b207XHJcbiAgICB9O1xyXG5cclxuICAgIFV0aWwucHJvdG90eXBlLmlzTW9iaWxlID0gZnVuY3Rpb24oYWdlbnQpIHtcclxuICAgICAgcmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChhZ2VudCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFV0aWwucHJvdG90eXBlLmNyZWF0ZUV2ZW50ID0gZnVuY3Rpb24oZXZlbnQsIGJ1YmJsZSwgY2FuY2VsLCBkZXRhaWwpIHtcclxuICAgICAgdmFyIGN1c3RvbUV2ZW50O1xyXG4gICAgICBpZiAoYnViYmxlID09IG51bGwpIHtcclxuICAgICAgICBidWJibGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY2FuY2VsID09IG51bGwpIHtcclxuICAgICAgICBjYW5jZWwgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGV0YWlsID09IG51bGwpIHtcclxuICAgICAgICBkZXRhaWwgPSBudWxsO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCAhPSBudWxsKSB7XHJcbiAgICAgICAgY3VzdG9tRXZlbnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnQ3VzdG9tRXZlbnQnKTtcclxuICAgICAgICBjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIGJ1YmJsZSwgY2FuY2VsLCBkZXRhaWwpO1xyXG4gICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0ICE9IG51bGwpIHtcclxuICAgICAgICBjdXN0b21FdmVudCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0KCk7XHJcbiAgICAgICAgY3VzdG9tRXZlbnQuZXZlbnRUeXBlID0gZXZlbnQ7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY3VzdG9tRXZlbnQuZXZlbnROYW1lID0gZXZlbnQ7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIGN1c3RvbUV2ZW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBVdGlsLnByb3RvdHlwZS5lbWl0RXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCkge1xyXG4gICAgICBpZiAoZWxlbS5kaXNwYXRjaEV2ZW50ICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZWxlbS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcclxuICAgICAgfSBlbHNlIGlmIChldmVudCBpbiAoZWxlbSAhPSBudWxsKSkge1xyXG4gICAgICAgIHJldHVybiBlbGVtW2V2ZW50XSgpO1xyXG4gICAgICB9IGVsc2UgaWYgKChcIm9uXCIgKyBldmVudCkgaW4gKGVsZW0gIT0gbnVsbCkpIHtcclxuICAgICAgICByZXR1cm4gZWxlbVtcIm9uXCIgKyBldmVudF0oKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBVdGlsLnByb3RvdHlwZS5hZGRFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50LCBmbikge1xyXG4gICAgICBpZiAoZWxlbS5hZGRFdmVudExpc3RlbmVyICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZWxlbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xyXG4gICAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBlbGVtLmF0dGFjaEV2ZW50KFwib25cIiArIGV2ZW50LCBmbik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIGVsZW1bZXZlbnRdID0gZm47XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVXRpbC5wcm90b3R5cGUucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCwgZm4pIHtcclxuICAgICAgaWYgKGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgZm4sIGZhbHNlKTtcclxuICAgICAgfSBlbHNlIGlmIChlbGVtLmRldGFjaEV2ZW50ICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZWxlbS5kZXRhY2hFdmVudChcIm9uXCIgKyBldmVudCwgZm4pO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBkZWxldGUgZWxlbVtldmVudF07XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgVXRpbC5wcm90b3R5cGUuaW5uZXJIZWlnaHQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgaWYgKCdpbm5lckhlaWdodCcgaW4gd2luZG93KSB7XHJcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gVXRpbDtcclxuXHJcbiAgfSkoKTtcclxuXHJcbiAgV2Vha01hcCA9IHRoaXMuV2Vha01hcCB8fCB0aGlzLk1veldlYWtNYXAgfHwgKFdlYWtNYXAgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICBmdW5jdGlvbiBXZWFrTWFwKCkge1xyXG4gICAgICB0aGlzLmtleXMgPSBbXTtcclxuICAgICAgdGhpcy52YWx1ZXMgPSBbXTtcclxuICAgIH1cclxuXHJcbiAgICBXZWFrTWFwLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihrZXkpIHtcclxuICAgICAgdmFyIGksIGl0ZW0sIGosIGxlbiwgcmVmO1xyXG4gICAgICByZWYgPSB0aGlzLmtleXM7XHJcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XHJcbiAgICAgICAgaXRlbSA9IHJlZltpXTtcclxuICAgICAgICBpZiAoaXRlbSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbaV07XHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFdlYWtNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgdmFyIGksIGl0ZW0sIGosIGxlbiwgcmVmO1xyXG4gICAgICByZWYgPSB0aGlzLmtleXM7XHJcbiAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XHJcbiAgICAgICAgaXRlbSA9IHJlZltpXTtcclxuICAgICAgICBpZiAoaXRlbSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICB0aGlzLnZhbHVlc1tpXSA9IHZhbHVlO1xyXG4gICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICB0aGlzLmtleXMucHVzaChrZXkpO1xyXG4gICAgICByZXR1cm4gdGhpcy52YWx1ZXMucHVzaCh2YWx1ZSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiBXZWFrTWFwO1xyXG5cclxuICB9KSgpKTtcclxuXHJcbiAgTXV0YXRpb25PYnNlcnZlciA9IHRoaXMuTXV0YXRpb25PYnNlcnZlciB8fCB0aGlzLldlYmtpdE11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5Nb3pNdXRhdGlvbk9ic2VydmVyIHx8IChNdXRhdGlvbk9ic2VydmVyID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgZnVuY3Rpb24gTXV0YXRpb25PYnNlcnZlcigpIHtcclxuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ011dGF0aW9uT2JzZXJ2ZXIgaXMgbm90IHN1cHBvcnRlZCBieSB5b3VyIGJyb3dzZXIuJyk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ1dPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIE11dGF0aW9uT2JzZXJ2ZXIubm90U3VwcG9ydGVkID0gdHJ1ZTtcclxuXHJcbiAgICBNdXRhdGlvbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlID0gZnVuY3Rpb24oKSB7fTtcclxuXHJcbiAgICByZXR1cm4gTXV0YXRpb25PYnNlcnZlcjtcclxuXHJcbiAgfSkoKSk7XHJcblxyXG4gIGdldENvbXB1dGVkU3R5bGUgPSB0aGlzLmdldENvbXB1dGVkU3R5bGUgfHwgZnVuY3Rpb24oZWwsIHBzZXVkbykge1xyXG4gICAgdGhpcy5nZXRQcm9wZXJ0eVZhbHVlID0gZnVuY3Rpb24ocHJvcCkge1xyXG4gICAgICB2YXIgcmVmO1xyXG4gICAgICBpZiAocHJvcCA9PT0gJ2Zsb2F0Jykge1xyXG4gICAgICAgIHByb3AgPSAnc3R5bGVGbG9hdCc7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGdldENvbXB1dGVkU3R5bGVSWC50ZXN0KHByb3ApKSB7XHJcbiAgICAgICAgcHJvcC5yZXBsYWNlKGdldENvbXB1dGVkU3R5bGVSWCwgZnVuY3Rpb24oXywgX2NoYXIpIHtcclxuICAgICAgICAgIHJldHVybiBfY2hhci50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiAoKHJlZiA9IGVsLmN1cnJlbnRTdHlsZSkgIT0gbnVsbCA/IHJlZltwcm9wXSA6IHZvaWQgMCkgfHwgbnVsbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9O1xyXG5cclxuICBnZXRDb21wdXRlZFN0eWxlUlggPSAvKFxcLShbYS16XSl7MX0pL2c7XHJcblxyXG4gIHRoaXMuV09XID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgV09XLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcclxuICAgICAgYm94Q2xhc3M6ICd3b3cnLFxyXG4gICAgICBhbmltYXRlQ2xhc3M6ICdhbmltYXRlZCcsXHJcbiAgICAgIG9mZnNldDogMCxcclxuICAgICAgbW9iaWxlOiB0cnVlLFxyXG4gICAgICBsaXZlOiB0cnVlLFxyXG4gICAgICBjYWxsYmFjazogbnVsbFxyXG4gICAgfTtcclxuXHJcbiAgICBmdW5jdGlvbiBXT1cob3B0aW9ucykge1xyXG4gICAgICBpZiAob3B0aW9ucyA9PSBudWxsKSB7XHJcbiAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMuc2Nyb2xsQ2FsbGJhY2sgPSBiaW5kKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIHRoaXMpO1xyXG4gICAgICB0aGlzLnNjcm9sbEhhbmRsZXIgPSBiaW5kKHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XHJcbiAgICAgIHRoaXMuc3RhcnQgPSBiaW5kKHRoaXMuc3RhcnQsIHRoaXMpO1xyXG4gICAgICB0aGlzLnNjcm9sbGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5jb25maWcgPSB0aGlzLnV0aWwoKS5leHRlbmQob3B0aW9ucywgdGhpcy5kZWZhdWx0cyk7XHJcbiAgICAgIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuICAgICAgdGhpcy53b3dFdmVudCA9IHRoaXMudXRpbCgpLmNyZWF0ZUV2ZW50KHRoaXMuY29uZmlnLmJveENsYXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBXT1cucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIHJlZjtcclxuICAgICAgdGhpcy5lbGVtZW50ID0gd2luZG93LmRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcclxuICAgICAgaWYgKChyZWYgPSBkb2N1bWVudC5yZWFkeVN0YXRlKSA9PT0gXCJpbnRlcmFjdGl2ZVwiIHx8IHJlZiA9PT0gXCJjb21wbGV0ZVwiKSB7XHJcbiAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KGRvY3VtZW50LCAnRE9NQ29udGVudExvYWRlZCcsIHRoaXMuc3RhcnQpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmZpbmlzaGVkID0gW107XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGJveCwgaiwgbGVuLCByZWY7XHJcbiAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xyXG4gICAgICB0aGlzLmJveGVzID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0cztcclxuICAgICAgICByZWYgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcclxuICAgICAgICByZXN1bHRzID0gW107XHJcbiAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgICBib3ggPSByZWZbal07XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goYm94KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgIH0pLmNhbGwodGhpcyk7XHJcbiAgICAgIHRoaXMuYWxsID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0cztcclxuICAgICAgICByZWYgPSB0aGlzLmJveGVzO1xyXG4gICAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgIGJveCA9IHJlZltqXTtcclxuICAgICAgICAgIHJlc3VsdHMucHVzaChib3gpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgfSkuY2FsbCh0aGlzKTtcclxuICAgICAgaWYgKHRoaXMuYm94ZXMubGVuZ3RoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzYWJsZWQoKSkge1xyXG4gICAgICAgICAgdGhpcy5yZXNldFN0eWxlKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJlZiA9IHRoaXMuYm94ZXM7XHJcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgYm94ID0gcmVmW2pdO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKCkpIHtcclxuICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudCh3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xyXG4gICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIDUwKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAodGhpcy5jb25maWcubGl2ZSkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgIHJldHVybiBmdW5jdGlvbihyZWNvcmRzKSB7XHJcbiAgICAgICAgICAgIHZhciBrLCBsZW4xLCBub2RlLCByZWNvcmQsIHJlc3VsdHM7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChrID0gMCwgbGVuMSA9IHJlY29yZHMubGVuZ3RoOyBrIDwgbGVuMTsgaysrKSB7XHJcbiAgICAgICAgICAgICAgcmVjb3JkID0gcmVjb3Jkc1trXTtcclxuICAgICAgICAgICAgICByZXN1bHRzLnB1c2goKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGwsIGxlbjIsIHJlZjEsIHJlc3VsdHMxO1xyXG4gICAgICAgICAgICAgICAgcmVmMSA9IHJlY29yZC5hZGRlZE5vZGVzIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0czEgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobCA9IDAsIGxlbjIgPSByZWYxLmxlbmd0aDsgbCA8IGxlbjI7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgICBub2RlID0gcmVmMVtsXTtcclxuICAgICAgICAgICAgICAgICAgcmVzdWx0czEucHVzaCh0aGlzLmRvU3luYyhub2RlKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0czE7XHJcbiAgICAgICAgICAgICAgfSkuY2FsbChfdGhpcykpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgICAgfTtcclxuICAgICAgICB9KSh0aGlzKSkub2JzZXJ2ZShkb2N1bWVudC5ib2R5LCB7XHJcbiAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXHJcbiAgICAgICAgICBzdWJ0cmVlOiB0cnVlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgV09XLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XHJcbiAgICAgIHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHdpbmRvdywgJ3Njcm9sbCcsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XHJcbiAgICAgIHRoaXMudXRpbCgpLnJlbW92ZUV2ZW50KHdpbmRvdywgJ3Jlc2l6ZScsIHRoaXMuc2Nyb2xsSGFuZGxlcik7XHJcbiAgICAgIGlmICh0aGlzLmludGVydmFsICE9IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBXT1cucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgIGlmIChNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRvU3luYyh0aGlzLmVsZW1lbnQpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuZG9TeW5jID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICB2YXIgYm94LCBqLCBsZW4sIHJlZiwgcmVzdWx0cztcclxuICAgICAgaWYgKGVsZW1lbnQgPT0gbnVsbCkge1xyXG4gICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICAgIH1cclxuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZSB8fCBlbGVtZW50O1xyXG4gICAgICByZWYgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIgKyB0aGlzLmNvbmZpZy5ib3hDbGFzcyk7XHJcbiAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgYm94ID0gcmVmW2pdO1xyXG4gICAgICAgIGlmIChpbmRleE9mLmNhbGwodGhpcy5hbGwsIGJveCkgPCAwKSB7XHJcbiAgICAgICAgICB0aGlzLmJveGVzLnB1c2goYm94KTtcclxuICAgICAgICAgIHRoaXMuYWxsLnB1c2goYm94KTtcclxuICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWQgfHwgdGhpcy5kaXNhYmxlZCgpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRTdHlsZSgpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCwgdHJ1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5zY3JvbGxlZCA9IHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2godm9pZCAwKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uKGJveCkge1xyXG4gICAgICB0aGlzLmFwcGx5U3R5bGUoYm94KTtcclxuICAgICAgYm94LmNsYXNzTmFtZSA9IGJveC5jbGFzc05hbWUgKyBcIiBcIiArIHRoaXMuY29uZmlnLmFuaW1hdGVDbGFzcztcclxuICAgICAgaWYgKHRoaXMuY29uZmlnLmNhbGxiYWNrICE9IG51bGwpIHtcclxuICAgICAgICB0aGlzLmNvbmZpZy5jYWxsYmFjayhib3gpO1xyXG4gICAgICB9XHJcbiAgICAgIHRoaXMudXRpbCgpLmVtaXRFdmVudChib3gsIHRoaXMud293RXZlbnQpO1xyXG4gICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChib3gsICdhbmltYXRpb25lbmQnLCB0aGlzLnJlc2V0QW5pbWF0aW9uKTtcclxuICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoYm94LCAnb2FuaW1hdGlvbmVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xyXG4gICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChib3gsICd3ZWJraXRBbmltYXRpb25FbmQnLCB0aGlzLnJlc2V0QW5pbWF0aW9uKTtcclxuICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoYm94LCAnTVNBbmltYXRpb25FbmQnLCB0aGlzLnJlc2V0QW5pbWF0aW9uKTtcclxuICAgICAgcmV0dXJuIGJveDtcclxuICAgIH07XHJcblxyXG4gICAgV09XLnByb3RvdHlwZS5hcHBseVN0eWxlID0gZnVuY3Rpb24oYm94LCBoaWRkZW4pIHtcclxuICAgICAgdmFyIGRlbGF5LCBkdXJhdGlvbiwgaXRlcmF0aW9uO1xyXG4gICAgICBkdXJhdGlvbiA9IGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtd293LWR1cmF0aW9uJyk7XHJcbiAgICAgIGRlbGF5ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctZGVsYXknKTtcclxuICAgICAgaXRlcmF0aW9uID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctaXRlcmF0aW9uJyk7XHJcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGUoKGZ1bmN0aW9uKF90aGlzKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgcmV0dXJuIF90aGlzLmN1c3RvbVN0eWxlKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbik7XHJcbiAgICAgICAgfTtcclxuICAgICAgfSkodGhpcykpO1xyXG4gICAgfTtcclxuXHJcbiAgICBXT1cucHJvdG90eXBlLmFuaW1hdGUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgIGlmICgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3cpIHtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcclxuICAgICAgICB9O1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgfSkoKTtcclxuXHJcbiAgICBXT1cucHJvdG90eXBlLnJlc2V0U3R5bGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGJveCwgaiwgbGVuLCByZWYsIHJlc3VsdHM7XHJcbiAgICAgIHJlZiA9IHRoaXMuYm94ZXM7XHJcbiAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgYm94ID0gcmVmW2pdO1xyXG4gICAgICAgIHJlc3VsdHMucHVzaChib3guc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJyk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUucmVzZXRBbmltYXRpb24gPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICB2YXIgdGFyZ2V0O1xyXG4gICAgICBpZiAoZXZlbnQudHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2FuaW1hdGlvbmVuZCcpID49IDApIHtcclxuICAgICAgICB0YXJnZXQgPSBldmVudC50YXJnZXQgfHwgZXZlbnQuc3JjRWxlbWVudDtcclxuICAgICAgICByZXR1cm4gdGFyZ2V0LmNsYXNzTmFtZSA9IHRhcmdldC5jbGFzc05hbWUucmVwbGFjZShjb25maWcuYW5pbWF0ZUNsYXNzLCAnJykudHJpbSgpO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuY3VzdG9tU3R5bGUgPSBmdW5jdGlvbihib3gsIGhpZGRlbiwgZHVyYXRpb24sIGRlbGF5LCBpdGVyYXRpb24pIHtcclxuICAgICAgaWYgKGhpZGRlbikge1xyXG4gICAgICAgIHRoaXMuY2FjaGVBbmltYXRpb25OYW1lKGJveCk7XHJcbiAgICAgIH1cclxuICAgICAgYm94LnN0eWxlLnZpc2liaWxpdHkgPSBoaWRkZW4gPyAnaGlkZGVuJyA6ICd2aXNpYmxlJztcclxuICAgICAgaWYgKGR1cmF0aW9uKSB7XHJcbiAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XHJcbiAgICAgICAgICBhbmltYXRpb25EdXJhdGlvbjogZHVyYXRpb25cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoZGVsYXkpIHtcclxuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcclxuICAgICAgICAgIGFuaW1hdGlvbkRlbGF5OiBkZWxheVxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChpdGVyYXRpb24pIHtcclxuICAgICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcclxuICAgICAgICAgIGFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50OiBpdGVyYXRpb25cclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLnZlbmRvclNldChib3guc3R5bGUsIHtcclxuICAgICAgICBhbmltYXRpb25OYW1lOiBoaWRkZW4gPyAnbm9uZScgOiB0aGlzLmNhY2hlZEFuaW1hdGlvbk5hbWUoYm94KVxyXG4gICAgICB9KTtcclxuICAgICAgcmV0dXJuIGJveDtcclxuICAgIH07XHJcblxyXG4gICAgV09XLnByb3RvdHlwZS52ZW5kb3JzID0gW1wibW96XCIsIFwid2Via2l0XCJdO1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yU2V0ID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydGllcykge1xyXG4gICAgICB2YXIgbmFtZSwgcmVzdWx0cywgdmFsdWUsIHZlbmRvcjtcclxuICAgICAgcmVzdWx0cyA9IFtdO1xyXG4gICAgICBmb3IgKG5hbWUgaW4gcHJvcGVydGllcykge1xyXG4gICAgICAgIHZhbHVlID0gcHJvcGVydGllc1tuYW1lXTtcclxuICAgICAgICBlbGVtW1wiXCIgKyBuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICB2YXIgaiwgbGVuLCByZWYsIHJlc3VsdHMxO1xyXG4gICAgICAgICAgcmVmID0gdGhpcy52ZW5kb3JzO1xyXG4gICAgICAgICAgcmVzdWx0czEgPSBbXTtcclxuICAgICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgICAgICB2ZW5kb3IgPSByZWZbal07XHJcbiAgICAgICAgICAgIHJlc3VsdHMxLnB1c2goZWxlbVtcIlwiICsgdmVuZG9yICsgKG5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkpICsgKG5hbWUuc3Vic3RyKDEpKV0gPSB2YWx1ZSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0czE7XHJcbiAgICAgICAgfSkuY2FsbCh0aGlzKSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUudmVuZG9yQ1NTID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydHkpIHtcclxuICAgICAgdmFyIGosIGxlbiwgcmVmLCByZXN1bHQsIHN0eWxlLCB2ZW5kb3I7XHJcbiAgICAgIHN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShlbGVtKTtcclxuICAgICAgcmVzdWx0ID0gc3R5bGUuZ2V0UHJvcGVydHlDU1NWYWx1ZShwcm9wZXJ0eSk7XHJcbiAgICAgIHJlZiA9IHRoaXMudmVuZG9ycztcclxuICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgdmVuZG9yID0gcmVmW2pdO1xyXG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdCB8fCBzdHlsZS5nZXRQcm9wZXJ0eUNTU1ZhbHVlKFwiLVwiICsgdmVuZG9yICsgXCItXCIgKyBwcm9wZXJ0eSk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcblxyXG4gICAgV09XLnByb3RvdHlwZS5hbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XHJcbiAgICAgIHZhciBhbmltYXRpb25OYW1lO1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSB0aGlzLnZlbmRvckNTUyhib3gsICdhbmltYXRpb24tbmFtZScpLmNzc1RleHQ7XHJcbiAgICAgIH0gY2F0Y2ggKF9lcnJvcikge1xyXG4gICAgICAgIGFuaW1hdGlvbk5hbWUgPSBnZXRDb21wdXRlZFN0eWxlKGJveCkuZ2V0UHJvcGVydHlWYWx1ZSgnYW5pbWF0aW9uLW5hbWUnKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoYW5pbWF0aW9uTmFtZSA9PT0gJ25vbmUnKSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBhbmltYXRpb25OYW1lO1xyXG4gICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVBbmltYXRpb25OYW1lID0gZnVuY3Rpb24oYm94KSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmFuaW1hdGlvbk5hbWVDYWNoZS5zZXQoYm94LCB0aGlzLmFuaW1hdGlvbk5hbWUoYm94KSk7XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuY2FjaGVkQW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUuZ2V0KGJveCk7XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5zY3JvbGxlZCA9IHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUuc2Nyb2xsQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcclxuICAgICAgdmFyIGJveDtcclxuICAgICAgaWYgKHRoaXMuc2Nyb2xsZWQpIHtcclxuICAgICAgICB0aGlzLnNjcm9sbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5ib3hlcyA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0cztcclxuICAgICAgICAgIHJlZiA9IHRoaXMuYm94ZXM7XHJcbiAgICAgICAgICByZXN1bHRzID0gW107XHJcbiAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgYm94ID0gcmVmW2pdO1xyXG4gICAgICAgICAgICBpZiAoIShib3gpKSB7XHJcbiAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKGJveCkpIHtcclxuICAgICAgICAgICAgICB0aGlzLnNob3coYm94KTtcclxuICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXN1bHRzLnB1c2goYm94KTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH0pLmNhbGwodGhpcyk7XHJcbiAgICAgICAgaWYgKCEodGhpcy5ib3hlcy5sZW5ndGggfHwgdGhpcy5jb25maWcubGl2ZSkpIHtcclxuICAgICAgICAgIHJldHVybiB0aGlzLnN0b3AoKTtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgV09XLnByb3RvdHlwZS5vZmZzZXRUb3AgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgIHZhciB0b3A7XHJcbiAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFRvcCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgfVxyXG4gICAgICB0b3AgPSBlbGVtZW50Lm9mZnNldFRvcDtcclxuICAgICAgd2hpbGUgKGVsZW1lbnQgPSBlbGVtZW50Lm9mZnNldFBhcmVudCkge1xyXG4gICAgICAgIHRvcCArPSBlbGVtZW50Lm9mZnNldFRvcDtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gdG9wO1xyXG4gICAgfTtcclxuXHJcbiAgICBXT1cucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uKGJveCkge1xyXG4gICAgICB2YXIgYm90dG9tLCBvZmZzZXQsIHRvcCwgdmlld0JvdHRvbSwgdmlld1RvcDtcclxuICAgICAgb2Zmc2V0ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctb2Zmc2V0JykgfHwgdGhpcy5jb25maWcub2Zmc2V0O1xyXG4gICAgICB2aWV3VG9wID0gd2luZG93LnBhZ2VZT2Zmc2V0O1xyXG4gICAgICB2aWV3Qm90dG9tID0gdmlld1RvcCArIE1hdGgubWluKHRoaXMuZWxlbWVudC5jbGllbnRIZWlnaHQsIHRoaXMudXRpbCgpLmlubmVySGVpZ2h0KCkpIC0gb2Zmc2V0O1xyXG4gICAgICB0b3AgPSB0aGlzLm9mZnNldFRvcChib3gpO1xyXG4gICAgICBib3R0b20gPSB0b3AgKyBib3guY2xpZW50SGVpZ2h0O1xyXG4gICAgICByZXR1cm4gdG9wIDw9IHZpZXdCb3R0b20gJiYgYm90dG9tID49IHZpZXdUb3A7XHJcbiAgICB9O1xyXG5cclxuICAgIFdPVy5wcm90b3R5cGUudXRpbCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fdXRpbCAhPSBudWxsID8gdGhpcy5fdXRpbCA6IHRoaXMuX3V0aWwgPSBuZXcgVXRpbCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBXT1cucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgIHJldHVybiAhdGhpcy5jb25maWcubW9iaWxlICYmIHRoaXMudXRpbCgpLmlzTW9iaWxlKG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gV09XO1xyXG5cclxuICB9KSgpO1xyXG5cclxufSkuY2FsbCh0aGlzKTsiXX0=
